---
title: "Writing durable code"
---

```{r, include = FALSE}
leanbuild::set_knitr_image_path()
```

# Writing durable code

## Learning Objectives

```{r, fig.align='center', echo = FALSE, fig.alt= "This chapter will demonstrate how to: Identify what aspects make an analysis project more easily navigable. Set up a project with an organizational scheme that will work for the author and their colleagues."}
leanbuild::include_slide("https://docs.google.com/presentation/d/1LMurysUhCjZb7DVF6KS9QmJ5NBjwWVjRn40MS9f2noE/edit#slide=id.gf7bed24491_1_51")
```

## General principles

1. **Work on your code iteratively**
Getting your code to work the first time is the first step, but don't stop there! 
Just like in writing a manuscript you wouldn't consider your first draft a final draft, your polishing code works best in an iterative manner. Although you may need to set it aside for the day to give your brain a rest, return to your code later with fresh eyes and try to look for ways to improve upon it! 



2. **Prioritize readability over cleverness.** 
Although some dose of cleverness in code can be helpful, if the clever method you introduce to your code makes it difficult for others to understand, it probably is not worth it 


3. **DRY up your code**
https://web.archive.org/web/20131204221336/http://programmer.97things.oreilly.com/wiki/index.php/Don't_Repeat_Yourself 

4. **Don't be afraid to delete and refresh** -- Don’t be afraid to delete it all and re-run (multiple times)

5. **Use code comments effectively** 
https://jhudatascience.org/Documentation_and_Usability/creating-clarifying-code-comments.html#creating-clarifying-code-comments 

6. **Use informative variable names.**

7. **Follow a code style.** 
Just like when writing doesN"t FoLLOW conv3nTi0Ns OR_sPAcinng 0r sp3llinG it can be distracting, the same goes for code. 
Your code may even work all the same, but for others, a lack of consistent style can make it difficult to read and understand. 
For reproducibility purposes, readability is important! 
The easier you can make it on your readers, the more likely they will be able to understand and reproduce the results. 

Some Python: 
https://www.python.org/dev/peps/pep-0008/
https://google.github.io/styleguide/pyguide.html 
R
http://adv-r.had.co.nz/Style.html
https://google.github.io/styleguide/Rguide.html 


To review:  
```{r, fig.align='center', echo = FALSE, fig.alt= "General principles of writing reproducible code. Work on your code iteratively. Prioritize readability over cleverness. DRY up your code. Don't be afraid to delete and refresh. Use code comments effectively. Use informative variable names. Follow a code style."}
leanbuild::include_slide("https://docs.google.com/presentation/d/1LMurysUhCjZb7DVF6KS9QmJ5NBjwWVjRn40MS9f2noE/edit#slide=id.gfc9e5f916a_0_89")
```

DRY code - Turn it into a function vs Change it in five places.
Error checking can make it easier for others and yourself to decipher the problem
Failing loudly >> failing silently
Being more specific to the context!
Functions 
Setting the seed
Try re-running something with/without setting the seed and see if you get the same thing
https://github.com/AlexsLemonade/training-modules/blob/master/intro-to-R-tidyverse/00c-good-scientific-coding-practices.md#setseed-helps-people-reproduce-your-results 
No mystery files; be clear about the file paths
Store a file and download it or say where you got it
Refresh your session -- Don’t be afraid to delete it all and re-run (a few times)



## Get the exercise project files (or continue with the files you used in the previous chapter)

<details> <summary>How to get the _Python project example files_</summary>
To get the _Python project example files_, [click this link](https://raw.githubusercontent.com/jhudsl/Reproducibility_in_Cancer_Informatics/main/chapter-zips/python-heatmap-chapt-7.zip).

```{bash, include = FALSE}
mkdir -p chapter-zips
wget -O chapter-zips/python-heatmap-chapt-7.zip https://raw.githubusercontent.com/jhudsl/Reproducibility_in_Cancer_Informatics/main/chapter-zips/python-heatmap-chapt-7.zip
```

Now double click your chapter zip file to unzip. For Windows you may have to [follow these instructions](https://support.microsoft.com/en-us/windows/zip-and-unzip-files-f6dde0a7-0fec-8294-e1d3-703ed85e7ebc)).

```{bash, include = FALSE}
unzip -o chapter-zips/python-heatmap-chapt-7.zip -d chapter-zips/
```
</details>

<details> <summary>How to get the _R project example files_</summary>
To get the _R project example files_, [click this link](https://raw.githubusercontent.com/jhudsl/Reproducibility_in_Cancer_Informatics/main/chapter-zips/r-heatmap-chapt-7.zip).

```{bash, include = FALSE}
mkdir -p chapter-zips
wget -O chapter-zips/r-heatmap-chapt-7.zip https://raw.githubusercontent.com/jhudsl/Reproducibility_in_Cancer_Informatics/main/chapter-zips/r-heatmap-chapt-7.zip
```

Now double click your chapter zip file to unzip. For Windows you may have to [follow these instructions](https://support.microsoft.com/en-us/windows/zip-and-unzip-files-f6dde0a7-0fec-8294-e1d3-703ed85e7ebc)).

```{bash, include = FALSE}
unzip -o chapter-zips/r-heatmap-chapt-7.zip -d chapter-zips/
```
</details>

## Exercise: Make code more durable!
